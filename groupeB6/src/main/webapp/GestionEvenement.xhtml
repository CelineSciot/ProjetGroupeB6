<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:jsf="http://xmlns.jcp.org/jsf"
xmlns:b="http://bootsfaces.net/ui">
	<h:head>
		<title>Liste évènements</title>
		
	</h:head>
<h:body>
		
		 <b:navBar brand="MSF" brandHref="index.xhtml" fluid="true" onclick="#{connexionController.seConnecter()}">
			  <b:navbarLinks>
			  <b:dropMenu value="Don">
			        <b:navLink value="Faire un don" href="Don.xhtml"></b:navLink>
			          <b:navLink value="Historique de mes dons" href="ListeDonUtilisateur.xhtml"></b:navLink>
			    </b:dropMenu>
			    <b:dropMenu value="Actions">
			      <b:navLink value="Voir les evenements en cours" href="#{utilisateurControl.doNext()}"></b:navLink>
			      <b:navLink value="Créer un événement" href="#{utilisateurControl.doAjoutEvent()}"></b:navLink>
			    </b:dropMenu>
			    
			    <b:dropMenu value="Gestion Evenement">
			      <b:navLink value="Gérer évenement" href="#{evenementControl.doGestion()}"></b:navLink>
			      <b:navLink value="Supprimer des évènements" href="#{evenementControl.doSupression()}"></b:navLink>
			      <b:navLink value="Ajouter des évènements" href="#{utilisateurControl.doAjoutEvent()}"></b:navLink>
			    </b:dropMenu>

			    <b:navLink value="A propos" href="About.xhtml"></b:navLink>
			    <b:navLink value="Contact" href="Contact.xhtml"></b:navLink>
			    
			  </b:navbarLinks>
			  <b:navbarLinks pull="right" styleClass="hidden-xs">
			   <h:form>
			    	<h:commandButton value="Deconnexion" action="#{connexionController.logout()}" rendered="#{connexionController.connect}" ></h:commandButton>
			    </h:form>
			  </b:navbarLinks>
			</b:navBar>

		<h:form>
		<h:commandButton  class="button" value="Afficher les évènements en traitement" action="#{evenementControl.afficherEvenementViaApprobation(false)}"></h:commandButton>
		<h:commandButton  class="button" value="Afficher les évènements approuvés" action="#{evenementControl.afficherEvenementViaApprobation(true)}"></h:commandButton>
		</h:form>
		
		<h:form>
			<h:dataTable value = "#{evenementControl.listeVoulue}" var = "evt"		
			   			headerClass = "UserTableHeader"
			   			rowClasses = "UserTableOddRow,UserTableEvenRow" style="width:100%;">
			   			<h:column>
			   			
				   			<div class="panel-group" style="width:80%;text-align:center;margin-left:10%;">
				    			<div class="panel panel-default">
				     				 <div class="panel-heading">
				     				 	<h:commandLink value="#{evt.titre}"  action="#{evenementControl.doDetails(evt)}"></h:commandLink>
				     				 </div>
				      				<div class="panel-body">
									      <img src="data:image/jpg;base64,#{evt.images}" width="380"></img><br/>
									      Date de l'évènement : #{evt.dateA}
									      <br/>
									       
									</div>
									<div class="panel-footer">
										<h:commandButton  class="button" value="Approuver" action="#{evenementControl.approuveEvenement(evt)}"></h:commandButton>
									    <h:commandButton  class="button" value="Supprimer" action="#{evenementControl.supprimerEvenementAdmin(evt)}"></h:commandButton>
									</div>
				    			</div>
				    		</div>
			    		</h:column>
			  
			 </h:dataTable>
	  	</h:form>
</h:body>
</html>
